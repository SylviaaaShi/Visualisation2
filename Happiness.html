<!DOCTYPE html>
<html>

<head>
  <title>Visualisation II</title>
  <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

  <!-- Import pure.css -->
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
    integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
</head>

<head>
  <link rel="stylesheet" type="text/css" href="Happiness.css">
</head>

<body style="background: no-repeat url('bgpic.webp');background-size: cover; background-position: top ">

    <div class="page">

      <div class="header-container">
        <h1>What Is Your Happiness Level?</h1>
        <h2 class="title-desc-text">Global happiness is a measure of the overall life satisfaction and well-being of the inhabitants of a country or region. With internationalisation and technological advances, people are increasingly concerned not only with economic growth, but also with the quality of life and happiness. Global happiness is not only about a country's economic development, but is also closely related to the cultural, political and social environment.</h2>

        <img src="bg.jpg" alt="Description of Image">
        
    </div>
    
<div class="title-desc">
    <h2>Why is measuring happiness important?</h2>
    <p>       
        Humans, as individuals, find their own way to comfort and happiness even in the most unfavourable situations. This also applies to collectives - people working together as friends, family, community and society to improve their lives. Measuring the overall well-being of a group can identify the biggest factors that positively and negatively affect well-being. These factors can then be targeted to improve the lives of those suffering by addressing root causes such as economic adversity, lack of healthcare or limited future opportunities.
    </p>>
    <div id="vis"></div> 
    <p>The shades of colour on this spectral world map represent different levels of happiness, with dark blue representing high levels of happiness and light blue and green representing lower levels of happiness. Most of <b>Europe, North America and Australia</b> show a dark blue colour, which means that these regions have relatively high levels of happiness. <b>Africa, Central Asia and some Asian countries</b> have lower levels of happiness, with the colours shown as light blue or green. Certain countries, such as some parts of the <b>Middle East</b> show a mix of dark and light blue, indicating that there are differences in happiness levels in these regions. But why would the happiness level values be different?
    </p>
</div>
    <hr>
    <hr>

      <h2>The five main factors of happiness we measure 
      </h2>
      <div id="vis6"></div> 
      <br>
      <p>The five main factors of well-being that we measure. In the chart, we can see how the countries are ranked according to the "Ladder Score" (Happiness Score).

        Each bar is made up of several sections representing five different happiness factors: <b>Freedom to make life choices, GDP per capita, Generosity, Life Expectancy and Social Support</b>.
        The total height of each country's bar, which is the value when all the factors are stacked up, represents the country's overall happiness. This means that higher bars indicate higher levels of happiness.
        
        
        </p>
    <br>
    <br>
    <hr>
    <hr>
    

      <div class="section-2">

        <div class="map">
            <div class="subtitle">
                <h2>World Happiness Top20 countries, 2023</h2>
                <div id="vis4"></div> 
           
            </div>
        </div>
    
        <div class="map-text">
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <p>
              The World Happiness Scale is based on survey responses from a large number of respondents around the world. These respondents were asked to assess the quality of their current lives, using a scale called a "ladder" from 0 to 10, where 0 is the worst life and 10 is the best life.

            </p>
            <p>This visualisation shows the top 20 countries in terms of global happiness in 2023 and their corresponding happiness scores. Finland tops this list with a score of 7.804, which is close to the maximum score of 8. This means that Finnish residents generally believe they have a high quality of life. The top 20 countries do not differ much in their happiness scores, ranging from 6.8 to 7.8. This means that life satisfaction levels are relatively high across these countries.</p>
        </div>
      </div>
    <br>
    <hr>
    <hr>
    <br>

      <div class="section-3">

        <div class="line-text">
          <p>This line graph shows how happiness levels have changed in different countries over a number of years. Switzerland, Australia and the United Kingdom have consistently high levels of happiness, while China, Russia and South Africa have relatively low levels. Certain countries experienced significant changes in happiness levels in specific years, such as after the 2008 economic crisis, suggesting that economic, political and social factors can all affect people's happiness.</p>
          <p>We can see that <b>South Africa's </b>happiness levels declined a lot in 2013. South Africa's economic growth slowed down in 2013. High unemployment, inflation and rising costs of living put pressure on many households. The miners' strike in South Africa culminated in 2012 and continued to have an impact in 2013. This led to disruptions in production and dealt a blow to both the economy and social stability.The political climate in South Africa became increasingly tense in 2013, linked to issues of government leadership, corruption and governance.
          </p>
        </div>
    
        <div class="subtitle">
            <div id="vis3"></div> 
        </div>

        
    
    </div>

    <br>
    <hr>
    <hr>
    <br>
    
    <div class="graphs-container">

      <!-- Graph 1 -->
      <div class="graph-container">
          <h2>Happiness and GDP</h2>
          <div id="vis2"></div>
          <p>Most of the data points are clustered in the upper right corner, which means that as GDP increases, happiness also increases. This suggests a positive correlation between GDP and happiness. There are some countries in the graph that have low GDP but have relatively high levels of happiness and vice versa. This means that there are other factors other than GDP that may affect the happiness level of a country.
            <b>Economic Development and Quality of Life: A country's GDP often correlates with the quality of life and standard of living of its population. </b>A high GDP may mean better public services, education and healthcare, all of which may increase people's happiness.
            </p>
      </div>
  
      <!-- Graph 2 -->
      <div class="graph-container">
        <h2>Happiness and Corruption</h2>
          <div id="vis5"></div>
          <p>The majority of data points in the data are centred on areas with moderate to high levels of corruption and moderate levels of happiness. Overall, there appears to be a decrease in happiness as the level of corruption increases, implying that there may be a negative correlation between the level of corruption and happiness. 
            Corruption usually means that public resources are being misused or stolen, which may lead to a decline in public services, thus affecting the public's quality of life and happiness. <b>Corruption may lead to a decrease in public trust in government and other public institutions. Trust is an important factor in social cohesion and stability, and a lack of trust may reduce people's sense of well-being.</b>
            </p>
      </div>
  
    </div>
    <footer>
      Â© Made by Yihan Shi | Student ID: 31119638 | FIT3179 Visualisation II
      <br>
      To find out more about happiness check out<a href="https://worldhappiness.report/about/" target="_blank"> World Happiness Report</a>
  </footer>
  

          
    
  </div>


  


  <script type="text/javascript">
    var specVis1 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Worle Happiness Level, 2023",
      "width": 900,
      "height": 500,
      "background": "transparent", 
      "projection": {"type": "equalEarth"},
      "data": {
        "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
      },
      "transform": [
        {
          "lookup": "properties.NAME",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/SylviaaaShi/Visualisation2/main/GDP_Happy.csv"
            },
            "key": "Country name",
            "fields": ["Happiness"]
          }
        },
        {"calculate": "datum.Active + 0.1", "as": "Active Cases"}
      ],
      "mark": {"type": "geoshape"},
      "encoding": {
        "color": {
          "field": "Happiness",
          "type": "quantitative",
          "scale": {"type": "log"}
        },
        "tooltip": [
          {"field": "properties.NAME", "type": "nominal", "title": "Country"},
          {"field": "Happiness", "type": "quantitative"}
        ]
      }
    };

    var specVis2 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 300,
      "height": 300,
      "background": "transparent", 
      "description": "Select multiple points with the shift key.",
      "data": {"url": "https://raw.githubusercontent.com/SylviaaaShi/Visualisation2/main/GDP_Happy.csv"},
      "params": [{
        "name": "paintbrush",
        "select": {"type": "point", "on": "mouseover", "nearest": true}
      }],
      "mark": {
      "type": "circle",
      "filled": true},
      "encoding": {
        "x": {"field": "GDP", "type": "quantitative"}, 
        "y": {"field": "Happiness", "type": "quantitative"}, 
        "size": {
          "condition": {"param": "paintbrush", "value": 300},
          "value": 50
        },
        "color": {
      "field": "Country name", 
      "type": "nominal",
      "scale": {"scheme": "category10"} 
    },
    "tooltip": [
      {"field": "Country name", "title": "Country"},
      {"field": "GDP", "title": "GDP"},
      {"field": "Happiness", "title": "Happiness"}
    ]
      }
    };

    var specVis3 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 400,
  "height": 300,
  "background": "transparent", 
  "data": {
    "url": "https://raw.githubusercontent.com/SylviaaaShi/Visualisation2/main/year_happy.csv"
  },
  "transform": [
    {"filter": "country_selection == null || datum.country == country_selection"}
  ],
  "params": [
    {
      "name": "country_selection",
      "bind": {
        "input": "select",
        "options": [
          null,
          "Australia",
          "China",
          "France",
          "Germany",
          "Japan",
          "Russia",
          "South Africa",
          "South Korea",
          "Switzerland",
          "United Kingdom",
          "United States"
        ],
        "labels": [
          "Show All",
          "Australia",
          "China",
          "France",
          "Germany",
          "Japan",
          "Russia",
          "South Africa",
          "South Korea",
          "Switzerland",
          "United Kingdom",
          "United States"
        ],
        "name": "Country : "
      }
    }
  ],
  "encoding": {
    "x": {"field": "year", "type": "temporal", "title": "year"},
    "y": {
      "field": "happiness",
      "type": "quantitative",
      "title": "happiness",
      "scale": {"domain": [3, 8]}
    },
    "color": {
      "condition": {
        "param": "hover",
        "field": "country", 
        "type": "nominal",
        "legend": null
      },
      "value": "grey"
    },
    "opacity": {"condition": {"param": "hover", "value": 1}, "value": 0.2}
  },
  "layer": [
    {
      "description": "transparent layer to make it easier to trigger selection",
      "params": [
        {
          "name": "hover",
          "select": {"type": "point", "fields": ["country"], "on": "mouseover"} 
        }
      ],
      "mark": {"type": "line", "strokeWidth": 8, "stroke": "transparent"}
    },
    {"mark": "line"},
    {
      "encoding": {
        "x": {"aggregate": "max", "field": "year"},
        "y": {"aggregate": {"argmax": "year"}, "field": "happiness"}
      },
      "layer": [
        {"mark": {"type": "circle"}},
        {
          "mark": {"type": "text", "align": "left", "dx": 4},
          "encoding": {"text": {"field": "country", "type": "nominal"}} 
        }
      ]
    },
    {
      "mark": {
        "type": "text",
        "align": "right",
        "baseline": "middle",
        "dx": -12,
        "fontSize": 11.5,
        "fontStyle": "italic"
      },
      "encoding": {
        "text": {"field": "country", "type": "nominal"}, 
        "color": {"field": "country", "type": "nominal"}, 
        "opacity": {
          "condition": {
            "test": "datum['country'] == 'Australia' || datum['country'] == 'China' || datum['country'] == 'France' || datum['country'] == 'Germary' || datum['country'] == ' Japan' || datum['country'] == 'Russia' ||  datum['country'] == 'United States'",
            "value": 0
          },
          "value": 0
        },
        "tooltip": [
          {"field": "country", "type": "nominal"}, 
          {"field": "year", "type": "temporal", "title": "year"},
          {
            "field": "happiness",
            "type": "quantitative",
            "format": ".2f"
          }
        ]
      }
    }
  ],
  "config": {"view": {"stroke": null}
  }
}

    var specVis4 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Vega-Lite version of bar chart from https://observablehq.com/@d3/learn-d3-scales.",
  "width": 400,
  "background": "transparent", 
  "title": "Top 20 countries with global happiness in 2023",
  "data": {"url": "https://raw.githubusercontent.com/SylviaaaShi/Visualisation2/main/WHR2023.csv"},
  "transform": [
    {"window": [{"op": "row_number", "as": "rank"}]},
    {"filter": "datum.rank <= 20"}
  ],
  "encoding": {
    "y": {"field": "Country name", "type": "nominal", "sort": "-x", "title": null},
    "x": {"field": "Ladder score", "type": "quantitative", "title": null}
  },
  "layer": [{
    "mark": "bar",
    "encoding": {
      "color": {
        "field": "Ladder score",
        "type": "quantitative",
        "title": "Happiness"
      }
    }
  }, {
    "mark": {
      "type": "text",
      "align": "right",
      "xOffset": -4,
      "aria": false
    },
    "encoding": {
      "text": {"field": "Ladder score", "type": "quantitative"},
      "color": {
        "condition": {
          "test": {"field": "Ladder score", "gt": 10},
          "value": "white"
        },
        "value": "black"
      }
    }
  }]
};
var specVis5 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 300,
      "height": 300,
      "background": "transparent", 
      "description": "Select multiple points with the shift key.",
      "data": {"url": "https://raw.githubusercontent.com/SylviaaaShi/Visualisation2/main/corruption.csv"},
      "params": [{
        "name": "paintbrush",
        "select": {"type": "point", "on": "mouseover", "nearest": true}
      }],
      "mark": {
      "type": "circle",
      "filled": true},
      "encoding": {
        "x": {"field": "corruption", "type": "quantitative"}, 
        "y": {"field": "happiness", "type": "quantitative"}, 
        "size": {
          "condition": {"param": "paintbrush", "value": 300},
          "value": 50
        },
        "color": {
      "field": "country", 
      "type": "nominal",
      "scale": {"scheme": "category10"} 
    },
    "tooltip": [
      {"field": "country", "title": "country"},
      {"field": "corruption", "title": "corruption"},
      {"field": "happiness", "title": "happiness"}
    ]
      }
    }

    var specVis6 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": "900",
  "height": "400",
  "background": "transparent", 
  "title": "Stacked Bar Chart (Sorted by Ladder Score)",
  "data": {
    "url": "https://raw.githubusercontent.com/SylviaaaShi/Visualisation2/main/WHR2023.csv",
    "format": {"type": "csv"}
  },
  "transform": [
    {"calculate": "datum['Healthy life expectancy'] / 100", "as": "Life Expectancy"},
    {"calculate": "datum['Logged GDP per capita'] / 100", "as": "GDP per capita"},
    {"fold": ["GDP per capita", "Social support", "Life Expectancy", "Freedom to make life choices", "Generosity"], "as": ["variable", "value"]},
    {"filter": {"selection": "variable_selector"}}
  ], 
  "selection": {
    "variable_selector": {
      "type": "multi",
      "fields": ["variable"],
      "bind": {"input": "select", "options": [null, "GDP per capita", "Social support", "Life Expectancy", "Freedom to make life choices", "Generosity"]
      ,"labels": ["Show All", "GDP per capita", "Social support", "Life Expectancy", "Freedom to make life choices", "Generosity"],
    "name":"Selection "}
    }
  },
  "mark": "bar",
  "encoding": {
    "x": {"field": "Country name", "type": "nominal", "title": "Country", "sort": {"field": "Ladder score", "order": "descending"}},
    "y": {"field": "value", "type": "quantitative", "title": "Values"},
    "color": {
      "field": "variable",
      "type": "nominal",
      "title": "Variable",
      "scale": {"range": ["#B7E0FE", "#B6E0FE", "#84C5F4", "#4098D7", "#006494"]}
    },
    "tooltip": [
      {"field": "Country name", "type": "nominal", "title": "Country"},
      {"field": "GDP per capita", "type": "quantitative", "title": "Logged GDP per capita"},
      {"field": "Social support", "type": "quantitative", "title": "Social Support"},
      {"field": "Life Expectancy", "type": "quantitative", "title": "Healthy Life Expectancy (Divided by 100)"},
      {"field": "Freedom to make life choices", "type": "quantitative", "title": "Freedom to Make Choices"},
      {"field": "Generosity", "type": "quantitative", "title": "Generosity"}
    ]
  }
}


    // Embed the Vega-Lite visualization for specVis1
    vegaEmbed('#vis', specVis1).catch(console.error);

    // Embed the Vega-Lite visualization for specVis2
    vegaEmbed('#vis2', specVis2, { "actions": false }).then(function (result) {
    }).catch(console.error);

    vegaEmbed('#vis3', specVis3, { "actions": false }).then(function (result) {
    }).catch(console.error);

    vegaEmbed('#vis4', specVis4, { "actions": false }).then(function (result) {
    }).catch(console.error);

    vegaEmbed('#vis5', specVis5, { "actions": false }).then(function (result) {
    }).catch(console.error);

    vegaEmbed('#vis6', specVis6, { "actions": false }).then(function (result) {
    }).catch(console.error);
  </script>
</body>

</html>
